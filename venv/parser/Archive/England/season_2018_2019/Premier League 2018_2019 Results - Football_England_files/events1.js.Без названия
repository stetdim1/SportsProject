var AdvertEvents={baseUrl:"",exitUrl:"",parentTagId:"",debug:(window.console)?true:false,previewMode:false,fired:[],active:true,terminated:false,interactiveTime:null,interactiveTimeCount:0,interactiveTimeMarker:0,lastMouseActivityTime:null,expandedTime:null,expandedTimeCount:0,expandedTimeMarker:0,autoExpanding:false,videoPixels:{},disengaged:[],loadManifest:function(b){if(AdvertEvents.previewMode){for(var a=0;a<b.length;a++){parent.registerPreviewEvent(b[a]["type"],b[a]["name"])}}},registerCounterAction:function(c,b){var a=document.getElementById(c);if(a){a.addEventListener(b,function(d){AdvertEvents.triggerCounterEvent(d,c,false)});if(AdvertEvents.previewMode){parent.registerPreviewEvent("counter",c)}if(this.debug){console.log("Registered counter handler for: "+c)}}},counter:function(a){this.triggerCounterEvent(null,a,false)},registerUniqueCounterAction:function(c,b){var a=document.getElementById(c);if(a){a.addEventListener(b,function(d){AdvertEvents.triggerCounterEvent(d,c,true)});if(AdvertEvents.previewMode){parent.registerPreviewEvent("counter",c)}if(this.debug){console.log("Registered unique counter handler for: "+c)}}},unique:function(a){this.triggerCounterEvent(null,a,true)},enable:function(){this.active=true},disable:function(){this.active=false},terminate:function(){this.terminated=true},ignore:function(a){AdvertEvents.disable();if(a){a()}setTimeout(function(){AdvertEvents.enable()},500)},triggerCounterEvent:function(b,a,c){if(!this.active||this.terminated){return}if(c&&this.isEventFiredAlready(b,a)){return}this.recordFiredEvent(b,a,"counter");if(this.debug){console.log("Triggered counter event: "+a)}},tally:function(a){if(!this.active||this.terminated){return}this.recordFiredEvent(null,a,"tally");if(this.debug){console.log("Triggered tally event: "+a)}},registerExitButton:function(b){var a=document.getElementById(b);if(a){a.addEventListener("click",function(c){AdvertEvents.triggerExitEvent(c,b)});if(AdvertEvents.previewMode){parent.registerPreviewEvent("exit",b)}if(this.debug){console.log("Registered exit handler for: "+b)}}},triggerExitEvent:function(b,a){if(!this.active||this.terminated){return}b.preventDefault();b.stopPropagation();this.recordFiredEvent(b,a,"exit");AdvertEvents.sendVPAIDEvent("AdClickThru");if(this.debug){console.log("Triggered exit event: "+a)}},registerVideoControls:function(b){if(b.dataset&&b.dataset.controlsEnabled){return}b.dataset.controlsEnabled=true;if(b.style){b.style.cursor="pointer"}else{b.setAttribute("style","cursor: pointer")}var d=b.parentElement;if(d){var j="display: none; cursor: pointer; position: absolute; float: left; top: 50%; left: 50%; width: 100px; height: 100px; margin-top: -50px; margin-left: -50px; z-index: 1000";var h="display: none; cursor: pointer; position: absolute; float: left; top: 0; left: 0; width: 32px; height: 32px; margin-top: 0px; margin-left: 0px; z-index: 1000";var e=function(n){n.style.display="none"};var g=function(n){n.style.display="block"};var f=document.createElement("img");f.title="Play Video";f.setAttribute("style",j);f.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFEAAABRCAMAAACdUboEAAAA81BMVEUAAAAAAADv7+8NDQ3T09P+/v6Ojo7////i4uL///////////8hISH///92dnb////m5ua9vb21tbWampqDg4MuLi7///////////////////9nZ2f////////////6+vry8vLPz89cXFz////s7Ozq6urZ2dn///9FRUX////////////5+fn///////8kJCT////////j4+P///////+UlJT///9+fn7////z8/P////v7+/b29utra04ODj////4+Pj19fXW1tbFxcW4uLj///9ycnJgYGD////////////7+/vt7e3c3Nzc3NykpKT////+LM0kAAAAUHRSTlNNAOBRtfl9/MjLePFW1nEtzp6YhXhZxLqUj4tsazoz8+OwZ9rY1LxzX1QuJvLtWVcKCMvHnYF9dQTn5t2+kVxa7um5ppp0b2hQJQv32cHAizJugVgAAALuSURBVFjD7NXZbptAFIDhqQeMwTYYvO+7nTjxlq1xm1ZVW7WJqkr/+z9NpVxhPMDg9DL/PR9zdDQa8eF/9y4qe+z3Ws3p2sJaT5utXv/xbeLKuSXarbM6V9wty6grL3dniC9tXrNmRpCf1KWQ9Uk+MGYWr7WvMopeA4ChcV8Sx5XujSEADS+LuCkCVKpSqJLVCkBxoy0ObICCK+JzCwD2QE98NoFcTSRXywHms47oAKYvRVrSNwEnXewAB1fo5B6ATpp4B9xshV7bG+AuWewACyl0kwugkyQ6wFhkaQw48eIl8CSy9QRcxokDoCCyVgAGMaINo21mcTsCWy1uwOyK7HVN2KhErwi+OCcfip5CbEBOniXKHDROxRegpri+OmQNuDoR2+o95+ZdvX23o+IecFUi1rieKrrALiIuoSKUInz7kkpWYBkRy1CNE2H2K0WsQvlYXMG1jBexvn9NXvcQvCPxAQyRIMJ1kEga8HAk2pBPFuHzxwQxD3ZY3IMp00RYxI8uTdiHxD7MRbrI8KeMI+fQD4k9MDTEpDfSgF5IbEGgJ8LfC6EqgFZIbEJeV+SPL9WraYbEKUy0RRgpfv8byiFxDfUMIhRORr+ATyHRAplJxPwR+aAExZAIiGwiHCKjA286I/xrx1pWEISCKPSgRUJBtWpjLULRRTshCZFwI1Hn/78mwcUg6NEDF3XRfMBwuTNzXp+AvFH/R6RH8o/CrMnt2KylfTRoI/so3wzShNyMfteIn+SudezBZnUi2KPho/ENwUcJw40TCYZLPGO8TXhG4EKAa4tlDOwUvkb+FfmaawqsL56uKe6dugfYX0Xdw7UZ8oOszeqK2vXj+7WU9SPXuCdB4zrW4a69QubSz3jmZ1x6Lpe+8AYgdO5dx/PXlgF4Q4fSkwHYK/3zsLXx7YWjZSk2cSySnobJAlWFY2dSVtmg3CybJtuzipr5Y9UqEPLH9iqLzoy0KGeS4zayZmD7qLPmGebh/44TdfwBh3A+nMQ0hvQAAAAASUVORK5CYII=";d.appendChild(f);var i=document.createElement("img");i.title="Pause Video";i.setAttribute("style",j);i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFEAAABRCAMAAACdUboEAAAA81BMVEUAAAAAAADn5+cAAADv7+/g4OAMDAzT09P////+/v7///////////92dnb////6+vrm5ubh4eH////a2tr///+8vLz///////////+ampqOjo7///9dXV0iIiL///////+Dg4Pl5eXy8vL///+1tbX///////9nZ2f///8vLy/////////////t7e3///8kJCTp6enOzs7Z2dnq6urj4+Pi4uL////Pz8////+UlJSPj4////////////////////////9DQ0P////////z8/Pi4uKrq6u2traAgID///8fHx////+dnZ3p6enGxsb///////9ORrZyAAAAUHRSTlNNAOld4PFRtS35ywnWcfzyzsfEvbqelI+LhX1zZ1ZTM3fr49qYendsa1on8O3YWVf8+ObVy8nHsJ2Bfn05BPLx5l9aPObkwph2bFUl1NKnPdy+flgAAAKeSURBVFjD7NPZattAFIDh06COdnnfV2LHsWPHDtnX0pJAKaHwv//TtARKZXtsSxr1rv/dufkYZubIp7z7L2p7eZ7Wq6NFRLQYVevT5xcz0ZncstntxMkq+p0AfUHHzyC+N/goOrfH7e5MiZp122P7POKjxllK0SkDULAferJe78EuAFB20ojLOUCxpUSXahUB5svE4sADKIWyu7AE4A2SiX0XsIayv6EFuP0k4gRwa0oOpWouMDksNoG3UJIUvgHNQ+I9cL2SZK2ugfv9YhOoKEmaqgDNfeIJcCdpugNOdot9oCLpqgD9XeIAuJG03QCDHaIHx6vU4uoYPL24BPdU0nfqwlInOnOoSZZqMHc0YhkslUlUFpS3xXdgqFnfJOQQONsSG1CS7ayflxcXR3+mo8vf02fZqgSNTdEHQp0I8FcE0Igh4G+IHShKZlGK0NkQA2gZiC0I1kUHCspAVAVw1sQnsMVAFBue1kQPHo3ER/Diog+uMhKVC35MfIUrMRLlCl5j4g+wDUUbpjGxDmND8TvUY2IV2oZiG6oxcQRdQ7ELQUxcwMxQ/AZfY2IEylDswZeYCIihKED+Z8z/HvN/6/z/Y/4780/3+tf8qVP2UL98pHoZTv16hvp1IQ3ra8JtCkVmKFAEm8gMB2htCsx2D3kmIto9mG0zkk3E1zZj1MLeftT1czM0dIXxXN18DA2N8LUfCbdxNclr41LeDrfnoHZfwYma/RlZUH+G5n0uyvuFVO+70q9/jRgDkCU2UgiMASBcqaROXLJRArmQzmMpiBgPYPEgYKAHuAyRo/eYFAI42RMxbmbvRN7YnheacV4kju0hgBbq+CMwqTiijj8OgjFSiOdVsYzjqnJQZawZ2IJ1gIw1D8Lx8FETB8hEADt5Er9SYEpeAAAAAElFTkSuQmCC";d.appendChild(i);var a=document.createElement("img");a.title="Enable Audio";a.setAttribute("style",j);a.src="data:image/png;base64,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";d.appendChild(a);var m=document.createElement("img");m.title="Toggle Audio";m.setAttribute("style",h);m.src=a.src;d.appendChild(m);var c=false;var k=false;var l=function(){var n=!!(b.currentTime>0&&!b.paused&&!b.ended&&b.readyState>2);var o=b.muted;if(n){if(o){e(f);if(c){g(i)}else{e(i)}if(k){e(a);g(m)}else{g(a);e(i);e(m)}}else{if(c){e(f);g(i);e(a);g(m)}else{e(f);e(i);e(a);g(m)}}}else{g(f);e(i);e(a);e(m)}};f.addEventListener("click",function(n){n.preventDefault();n.stopPropagation();b.play();if(k){b.muted=false;b.volume=0.8}l()});i.addEventListener("mouseover",function(){c=true;l()});i.addEventListener("click",function(n){n.preventDefault();n.stopPropagation();b.pause();l()});b.addEventListener("mouseover",function(){c=true;l()});b.addEventListener("mouseout",function(){c=false;l()});a.addEventListener("click",function(n){n.preventDefault();n.stopPropagation();b.muted=false;b.volume=0.8;k=true;l()});m.addEventListener("click",function(n){n.preventDefault();n.stopPropagation();b.muted=!b.muted;b.volume=0.8;k=true;l()});b.addEventListener("play",l);b.addEventListener("playing",l);b.addEventListener("timeupdate",l);b.addEventListener("pause",l);b.addEventListener("ended",function(){d.removeChild(f);d.removeChild(i);d.removeChild(a);d.removeChild(m)});b.addEventListener("click",function(){setTimeout(function(){AdvertEvents.ignore(function(){b.pause()})},500)})}},registerVideoTag:function(e,a){var c=["playing","play","timeupdate","pause","volumechange","ended"];var d=document.getElementById(e);if(d){for(var b=0;b<c.length;b++){d.addEventListener(c[b],function(f){AdvertEvents.triggerVideoEvent(f,e)})}if(AdvertEvents.previewMode){parent.registerPreviewEvent("video",e)}if(this.debug){console.log("Registered video handlers for: "+e)}if(a&&a.controls&&a.controls===true){AdvertEvents.registerVideoControls(d)}}},registerVideoPixel:function(b,a,c){if(!this.videoPixels[b]){this.videoPixels[b]={}}if(!this.videoPixels[b][a]){this.videoPixels[b][a]=[]}this.videoPixels[b][a].push(c);if(this.debug){console.log("Registered video pixel for: "+b+": "+a)}},triggerVideoPixel:function(c,b){if(this.videoPixels[c]&&this.videoPixels[c][b]){var d=this.videoPixels[c][b];for(var a=0;a<d.length;a++){this.loadPixelImg(d[a])}}},triggerVideoEvent:function(f,d,b){if(!this.active||this.terminated){return}var c=document.getElementById(d);if(c){var a=(100*(c.currentTime/c.duration));switch(f.type){case"playing":if(!this.isEventFiredAlready(f,d+": Start")){if(c.currentTime==0){this.recordFiredEvent(f,d+": Start","video");this.triggerVideoPixel(d,"Start");AdvertEvents.sendVPAIDEvent("AdVideoStart");if(this.debug){console.log("Triggered video event: "+d+": Start")}}}else{if(!this.isEventFiredAlready(null,d+": Replay")&&this.isEventFiredAlready(null,d+": Complete")){this.recordFiredEvent(f,d+": Replay","video");this.removeFiredEvent(d+": Complete");this.triggerVideoPixel(d,"Replay");if(this.debug){console.log("Triggered video event: "+d+": Replay")}}}break;case"play":if(!this.isEventFiredAlready(f,d+": Resume")&&this.isEventFiredAlready(null,d+": Pause")){this.recordFiredEvent(f,d+": Resume","video");this.removeFiredEvent(d+": Pause");this.triggerVideoPixel(d,"Resume");AdvertEvents.sendVPAIDEvent("AdPlaying");if(this.debug){console.log("Triggered video event: "+d+": Resume")}}break;case"timeupdate":if(!c.seeking){if(c.muted){if(!this.isEventFiredAlready(null,d+": Mute")){this.fired.push(d+": Mute")}}else{if(this.isEventFiredAlready(null,d+": Mute")&&!this.isEventFiredAlready(null,d+": Unmute")){this.recordFiredEvent(null,d+": Unmute","video");this.removeFiredEvent(d+": Mute");this.triggerVideoPixel(d,"Unmute");if(this.debug){console.log("Triggered video event: "+d+": Unmute")}}}if(a>=75){if(!this.isEventFiredAlready(f,d+": Third Quartile")){this.recordFiredEvent(f,d+": Third Quartile","video");this.triggerVideoPixel(d,"ThirdQuartile");AdvertEvents.sendVPAIDEvent("AdVideoThirdQuartile");if(this.debug){console.log("Triggered video event: "+d+": Third Quartile")}}}else{if(a>=50){if(!this.isEventFiredAlready(f,d+": Midpoint")){this.recordFiredEvent(f,d+": Midpoint","video");this.triggerVideoPixel(d,"Midpoint");AdvertEvents.sendVPAIDEvent("AdVideoMidpoint");if(this.debug){console.log("Triggered video event: "+d+": Midpoint")}}}else{if(a>=25){if(!this.isEventFiredAlready(f,d+": First Quartile")){this.recordFiredEvent(f,d+": First Quartile","video");this.triggerVideoPixel(d,"FirstQuartile");AdvertEvents.sendVPAIDEvent("AdVideoFirstQuartile");if(this.debug){console.log("Triggered video event: "+d+": First Quartile")}}}else{if(this.fired.indexOf(d+": Start")==-1){this.recordFiredEvent(f,d+": Start","video");this.triggerVideoPixel(d,"Start");AdvertEvents.sendVPAIDEvent("AdVideoStart");if(this.debug){console.log("Triggered video event: "+d+": Start")}}if((document.fullScreenElement&&document.fullScreenElement!==null)||document.mozFullScreenElement||document.webkitFullScreenElement){if(!this.isEventFiredAlready(f,d+": Fullscreen")){this.recordFiredEvent(f,d+": Fullscreen","video");this.triggerVideoPixel(d,"Fullscreen");if(this.debug){console.log("Triggered video event: "+d+": Fullscreen")}}}else{this.removeFiredEvent(d+": Fullscreen")}}}}}break;case"pause":if(!this.isEventFiredAlready(f,d+": Pause")&&c.currentTime>1&&c.currentTime!=c.duration&&!c.seeking){this.recordFiredEvent(f,d+": Pause","video");this.removeFiredEvent(d+": Resume");this.triggerVideoPixel(d,"Pause");AdvertEvents.sendVPAIDEvent("AdPaused");if(this.debug){console.log("Triggered video event: "+d+": Pause")}}break;case"volumechange":if(c.muted){if(!this.isEventFiredAlready(f,d+": Mute")){this.recordFiredEvent(f,d+": Mute","video");this.removeFiredEvent(d+": Unmute");this.triggerVideoPixel(d,"Mute");if(this.debug){console.log("Triggered video event: "+d+": Mute")}}}break;case"ended":if(!this.isEventFiredAlready(f,d+": Complete")){this.recordFiredEvent(f,d+": Complete","video");this.removeFiredEvent(d+": Start");this.removeFiredEvent(d+": Replay");this.removeFiredEvent(d+": First Quartile");this.removeFiredEvent(d+": Midpoint");this.removeFiredEvent(d+": Third Quartile");this.triggerVideoPixel(d,"Complete");AdvertEvents.sendVPAIDEvent("AdVideoComplete");if(this.debug){console.log("Triggered video event: "+d+": Complete")}}break}}},recordFiredEvent:function(h,b,c,a){if(h){h.AdvertTriggered=true}this.fired.push(b);var g=(this.disengaged.indexOf(b)===-1);if(AdvertEvents.previewMode){parent.interceptPreviewEvent(b,c,a,g)}var d=function(j,i){var e=AdvertEvents.baseUrl;if(!g){e=e.replace("[name]","[name]&disengaged=true")}e=e.replace("[type]",j);e=e.replace("[name]",encodeURIComponent(i));return e};var f=function(k,j,e){var i=AdvertEvents.exitUrl;if(!g){i=i.replace("[name]","[name]&disengaged=true")}i=i.replace("[type]",k);i=i.replace("[name]",encodeURIComponent(j));if(e&&e.length>0){i=i+"&redirect="+encodeURIComponent(e)}return i};if(AdvertEvents.baseUrl&&(AdvertEvents.baseUrl.lastIndexOf("http://",0)===0||AdvertEvents.baseUrl.lastIndexOf("https://",0)===0)){switch(c){case"counter":case"video":AdvertEvents.loadPixelInternal(d(c,b));break;case"tally":AdvertEvents.loadPixelInternal(d("counter&filter=true",b));break;case"exit":case"redirect":window.open(f(c,b,a),"_blank");break}}},disableEngagement:function(a){if(this.disengaged.indexOf(a)===-1){this.disengaged.push(a)}},enableEngagement:function(b){var a=this.disengaged.indexOf(b);if(a!==-1){this.disengaged.splice(a,1)}},isEventFiredAlready:function(b,a){var c=((b&&b.AdvertTriggered)||this.fired.indexOf(a)!=-1)?true:false;if(b){b.AdvertTriggered=true}return c},removeFiredEvent:function(b){var a=this.fired.indexOf(b);if(a!=-1){this.fired.splice(a,1)}},autoExpand:function(b,a){AdvertEvents.autoExpanding=true;AdvertEvents.expand(b,a)},expand:function(b,a){if(AdvertEvents.parentTagId&&AdvertEvents.parentTagId.length>0){parent.resizeIFRAME(AdvertEvents.parentTagId,b,a)}AdvertEvents.startExpandedTimeTracking();if(AdvertEvents.autoExpanding){AdvertEvents.counter("Creative Auto Expanded")}else{AdvertEvents.counter("Creative Expanded")}},autoCollapse:function(b,a){AdvertEvents.autoExpanding=true;AdvertEvents.collapse(b,a)},collapse:function(b,a){if(AdvertEvents.parentTagId&&AdvertEvents.parentTagId.length>0){parent.resizeIFRAME(AdvertEvents.parentTagId,b,a)}AdvertEvents.finishExpandedTimeTracking();if(AdvertEvents.autoExpanding){AdvertEvents.counter("Creative Auto Collapsed")}else{AdvertEvents.counter("Creative Collapsed")}AdvertEvents.autoExpanding=false},startExpandedTimeTracking:function(){if(!this.expandedTime){this.expandedTime=setInterval(function(){AdvertEvents.sendExpandedTimeEvent()},1000)}},sendExpandedTimeEvent:function(){if(!AdvertEvents.isPageVisible()||!AdvertEvents.isCreativeVisible()||AdvertEvents.terminated){return}if(!AdvertEvents.autoExpanding&&(((new Date().getTime())-AdvertEvents.lastMouseActivityTime)>(10*1000))){if(AdvertEvents.debug){console.log("Ignoring expanded time ping due to mouse inactivity timeout")}return}AdvertEvents.expandedTimeCount+=1;if(AdvertEvents.expandedTimeCount<=180&&(AdvertEvents.expandedTimeCount-AdvertEvents.expandedTimeMarker)>0){var a=function(d,c){var b=AdvertEvents.baseUrl;b=b.replace("[type]",d);b=b.replace("[name]",c+"&ticks="+AdvertEvents.expandedTimeCount);return b};new Image().src=a("expanded","time");if(this.debug){console.log("Sending expanded time ping...")}if(AdvertEvents.previewMode){parent.interceptPreviewEvent("Expanded","ping")}if(!AdvertEvents.interactiveTime&&AdvertEvents.interactiveTimeCount==0){AdvertEvents.sendInteractiveTimeEvent(true);AdvertEvents.interactiveTimeMarker+=1;if(AdvertEvents.debug){console.log("Forcing counting of interactive impression due to creative expansion")}}}},finishExpandedTimeTracking:function(){if(this.expandedTime){clearInterval(this.expandedTime);this.expandedTime=null;AdvertEvents.expandedTimeMarker=AdvertEvents.expandedTimeCount}},openLightbox:function(c,a,b){b=b||"#000000";if(AdvertEvents.parentTagId&&AdvertEvents.parentTagId.length>0){parent.openHtml5Lightbox(AdvertEvents.parentTagId,c,a,b)}AdvertEvents.startExpandedTimeTracking();if(AdvertEvents.autoExpanding){AdvertEvents.counter("Creative Auto Expanded")}else{AdvertEvents.counter("Creative Expanded")}},autoOpenLightbox:function(c,a,b){AdvertEvents.autoExpanding=true;AdvertEvents.openLightbox(c,a,b)},closeLightbox:function(b,a){if(AdvertEvents.parentTagId&&AdvertEvents.parentTagId.length>0){parent.closeHtml5Lightbox(AdvertEvents.parentTagId,b,a)}AdvertEvents.finishExpandedTimeTracking();if(AdvertEvents.autoExpanding){AdvertEvents.counter("Creative Auto Collapsed")}else{AdvertEvents.counter("Creative Collapsed")}AdvertEvents.autoExpanding=false},autoCloseLightbox:function(b,a){AdvertEvents.autoExpanding=true;AdvertEvents.closeLightbox(b,a)},enterFullscreen:function(a){a=a||"#000000";if(AdvertEvents.parentTagId&&AdvertEvents.parentTagId.length>0){parent.enterHtml5Fullscreen(AdvertEvents.parentTagId,a)}AdvertEvents.startExpandedTimeTracking();if(AdvertEvents.autoExpanding){AdvertEvents.counter("Creative Auto Expanded")}else{AdvertEvents.counter("Creative Expanded")}},autoEnterFullscreen:function(a){AdvertEvents.autoExpanding=true;AdvertEvents.enterFullscreen(a)},exitFullscreen:function(b,a){if(AdvertEvents.parentTagId&&AdvertEvents.parentTagId.length>0){parent.exitHtml5Fullscreen(AdvertEvents.parentTagId,b,a)}AdvertEvents.finishExpandedTimeTracking();if(AdvertEvents.autoExpanding){AdvertEvents.counter("Creative Auto Collapsed")}else{AdvertEvents.counter("Creative Collapsed")}AdvertEvents.autoExpanding=false},autoExitFullscreen:function(b,a){AdvertEvents.autoExpanding=true;AdvertEvents.exitFullscreen(b,a)},proximityCallback:function(){},detectMouseProximity:function(a){if(typeof a==="function"){AdvertEvents.proximityCallback=a;parent.detectMouseProximity();document.addEventListener("MouseProximity",function(b){AdvertEvents.proximityCallback(b.result)})}},startInteractiveTimeTracking:function(){if(!this.interactiveTime){this.interactiveTime=setInterval(function(){AdvertEvents.sendInteractiveTimeEvent(false)},1000);AdvertEvents.sendVPAIDEvent("AdInteraction")}},sendInteractiveTimeEvent:function(b){if(!b){if(!AdvertEvents.isPageVisible()||!AdvertEvents.isCreativeVisible()||AdvertEvents.terminated){return}if(((new Date().getTime())-AdvertEvents.lastMouseActivityTime)>(5*1000)){if(AdvertEvents.debug){console.log("Ignoring interactive time ping due to mouse inactivity timeout")}return}}AdvertEvents.interactiveTimeCount+=1;if(AdvertEvents.interactiveTimeCount<=180&&(AdvertEvents.interactiveTimeCount-AdvertEvents.interactiveTimeMarker)>0){var a=function(e,d){var c=AdvertEvents.baseUrl;c=c.replace("[type]",e);c=c.replace("[name]",d+"&ticks="+AdvertEvents.interactiveTimeCount);return c};new Image().src=a("interactive","time");if(this.debug){console.log("Sending interactive time ping...")}if(AdvertEvents.previewMode){parent.interceptPreviewEvent("Interactive","ping")}}},finishInteractiveTimeTracking:function(){if(this.interactiveTime){clearInterval(this.interactiveTime);this.interactiveTime=null;AdvertEvents.interactiveTimeMarker=AdvertEvents.interactiveTimeCount}},isPageVisible:function(){if(AdvertEvents.parentTagId&&AdvertEvents.parentTagId.length>0){return parent.isPageVisible()}var a=function(){var d=["webkit","moz","ms","o"];if("hidden" in document){return"hidden"}for(var c=0;c<d.length;c++){if((d[c]+"Hidden") in document){return d[c]+"Hidden"}}return null};var b=a();return(b)?!document[b]:true},isCreativeVisible:function(){if(AdvertEvents.parentTagId&&AdvertEvents.parentTagId.length>0){var c=parent.document.getElementById(AdvertEvents.parentTagId);if(c){var d=c.getBoundingClientRect();var b=Math.max(parent.document.documentElement.clientWidth,parent.window.innerWidth||0);var f=Math.max(parent.document.documentElement.clientHeight,parent.window.innerHeight||0);if(parent.document.compatMode&&parent.document.compatMode=="BackCompat"){b=Math.max(parent.document.body.clientWidth,parent.window.innerWidth||0);f=Math.max(parent.document.body.clientHeight,parent.window.innerHeight||0)}var a=c.clientWidth;var e=c.clientHeight;return(a>0&&e>0&&((d.top>=0&&d.top<f&&((d.left>=0&&d.left<b)||(d.right>0&&d.right<=b)||(d.left<0&&d.right>b)))||(d.top<0&&d.bottom>f&&((d.left>=0&&d.left<b)||(d.right>0&&d.right<=b)||(d.left<0&&d.right>b)))||(d.bottom>=0&&d.bottom<=f&&((d.left>=0&&d.left<b)||(d.right>0&&d.right<=b)||(d.left<0&&d.right>b)))))}else{return true}}else{return true}},onVisibilityChange:function(a){if(a&&typeof a==="function"){window.visibilityState="unknown";window.visibilityStateCallback=function(){var b=(AdvertEvents.isPageVisible()==true&&AdvertEvents.isCreativeVisible()==true)?"visible":"hidden";if(b!=window.visibilityState){window.visibilityState=b;a(window.visibilityState)}};parent.window.addEventListener("scroll",window.visibilityStateCallback);parent.window.addEventListener("visibilitychange",window.visibilityStateCallback);window.visibilityStateCallback()}},cancelVisibilityChange:function(){if(window.visibilityStateCallback&&typeof window.visibilityStateCallback==="function"){parent.window.removeEventListener("scroll",window.visibilityStateCallback);parent.window.removeEventListener("visibilitychange",window.visibilityStateCallback);window.visibilityState="unknown";window.visibilityStateCallback=null}},isViewportResized:function(d,b){var a=function(){var e=Math.max(document.documentElement.clientWidth,window.innerWidth||0);var f=Math.max(document.documentElement.clientHeight,window.innerHeight||0);if(document.compatMode&&document.compatMode=="BackCompat"){e=Math.max(document.body.clientWidth,window.innerWidth||0);f=Math.max(document.body.clientHeight,window.innerHeight||0)}return{width:e,height:f}};var c=a();return(c.width>=d&&c.height>=b)?true:false},handleOnClick:function(){if(!AdvertEvents.interactiveTime&&AdvertEvents.interactiveTimeCount==0){AdvertEvents.sendInteractiveTimeEvent(true);AdvertEvents.interactiveTimeMarker+=1;if(AdvertEvents.debug){console.log("Forcing counting of interactive impression due to click")}}document.body.removeEventListener("click",AdvertEvents.handleOnClick)},handleMouseActivity:function(){AdvertEvents.lastMouseActivityTime=new Date().getTime()},replaceMacroTokens:function(a){a=a.replace("[timestamp]",new Date().getTime());a=a.replace("%%TIMESTAMP%%",new Date().getTime());a=a.replace("%%RANDOM%%",Math.floor(89999999*Math.random()+10000000));a=a.replace("[random]",Math.floor(89999999*Math.random()+10000000));a=a.replace("%%CACHEBUSTER%%",Math.floor(89999999*Math.random()+10000000));return a},loadPixelFired:function(a){if(AdvertEvents.previewMode){parent.interceptPreviewEvent(a,"pixel")}if(AdvertEvents.debug){console.log("Fired tracking pixel: "+a)}},pixelsPending:0,loadPixelInternal:function(b){if(b&&b.indexOf("http")===0){b=AdvertEvents.replaceMacroTokens(b);var a=new Image();a.addEventListener("load",function(){AdvertEvents.pixelsPending-=1});a.addEventListener("error",function(){AdvertEvents.pixelsPending-=1});AdvertEvents.pixelsPending+=1;a.src=b}},loadPixelImg:function(b){if(b&&b.indexOf("http")===0){b=AdvertEvents.replaceMacroTokens(b);var a=new Image();a.addEventListener("load",function(){AdvertEvents.pixelsPending-=1});a.addEventListener("error",function(){AdvertEvents.pixelsPending-=1});AdvertEvents.pixelsPending+=1;a.src=b;AdvertEvents.loadPixelFired(b)}},loadPixelJS:function(b){if(b&&b.indexOf("http")===0){b=AdvertEvents.replaceMacroTokens(b);var c=document.createElement("script");c.type="text/javascript";c.addEventListener("load",function(){AdvertEvents.pixelsPending-=1});c.addEventListener("error",function(){AdvertEvents.pixelsPending-=1});AdvertEvents.pixelsPending+=1;c.src=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(c,a);AdvertEvents.loadPixelFired(b)}},loadPixelIframe:function(a){if(a&&a.indexOf("http")===0){a=AdvertEvents.replaceMacroTokens(a);var b=document.createElement("iframe");b.setAttribute("style","display:none; visibility:hidden; position:absolute; left:-1000px");b.addEventListener("load",function(){AdvertEvents.pixelsPending-=1});b.addEventListener("error",function(){AdvertEvents.pixelsPending-=1});AdvertEvents.pixelsPending+=1;b.setAttribute("src",a);document.body.appendChild(b);AdvertEvents.loadPixelFired(a)}},getVPAID:function(){var e=null;if(parent&&parent.AVP_VPAID){e=parent.AVP_VPAID}else{var c=parent.document.getElementsByTagName("iframe");for(var a=0;a<c.length;a++){var d=c[a];try{if(d&&d.contentWindow&&d.contentWindow.AVP_VPAID){e=d.contentWindow.AVP_VPAID}}catch(b){}}}return e},sendVPAIDEvent:function(a){var b=AdvertEvents.getVPAID();if(b){b.callEvent_(a)}},unload:function(){var a=AdvertEvents.getVPAID();if(a){a.stopAd()}else{if(AdvertEvents.parentTagId&&AdvertEvents.parentTagId.length>0){parent.destroyIFRAME(AdvertEvents.parentTagId)}}},playVideo:function(b){var c=document.getElementById(b);var a=c.play();if(a!==undefined){a.then(function(){if(AdvertEvents.debug){console.log("Video Auto Playing")}},function(d){AdvertEvents.registerVideoControls(c);c.muted=true;c.play();if(AdvertEvents.debug){console.log("Video Blocked - Rendering Controls")}})}},playVideoMutedIfNotPlaying:function(c){var e=document.getElementById(c);var b=!!(e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2);if(!b){AdvertEvents.playVideo(c);if(e.dataset&&e.dataset.mutationObserverEnabled){return}e.dataset.mutationObserverEnabled=true;var d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(d){var a=new d(function(f){f.forEach(function(g){if(g.type==="attributes"&&g.attributeName==="src"){AdvertEvents.playVideoMutedIfNotPlaying(c)}})});a.observe(e,{attributes:true})}}},getUserSegments:function(b,c){var a=new XMLHttpRequest();if(!("withCredentials" in a)){a=new XDomainRequest()}a.withCredentials=true;a.onreadystatechange=function(){if(a.readyState==4){var d=[];if(a.status==200){d=JSON.parse(a.responseText).segments}c(d)}};a.open("GET",(function(){var e="/servlet/segments?prefix="+encodeURIComponent(b);var d=document.getElementsByTagName("script");for(var f=0;f<d.length;f++){var g=d[f].getAttribute("src");if(g&&g.indexOf("/js/events1")!=-1){e=g.substring(0,g.indexOf("/js/events1"))+"/servlet/segments?prefix="+encodeURIComponent(b)}}return e})(),true);a.send("")}};AdvertVastVpaid={fireVastImpressionPixels:function(a){var b=a.childNodes;for(var d=0;d<b.length;d++){if(b[d].nodeName=="Impression"){AdvertEvents.loadPixelImg(AdvertVastVpaid.getCDATASection(b[d]))}}},registerVastVideoPixels:function(e,h){var f=[];var b=h.getElementsByTagName("Linear");if(b&&b.length>=1){var k=b[0].childNodes;for(var j=0;j<k.length;j++){if(k[j].nodeName=="TrackingEvents"){f=k[j].getElementsByTagName("Tracking")}}}for(var g=0;g<f.length;g++){var d=f[g];var a=AdvertVastVpaid.getCDATASection(d);switch(d.getAttribute("event")){case"creativeView":AdvertEvents.loadPixelImg(a);break;case"start":AdvertEvents.registerVideoPixel(e,"Start",a);break;case"firstQuartile":AdvertEvents.registerVideoPixel(e,"FirstQuartile",a);break;case"midpoint":AdvertEvents.registerVideoPixel(e,"Midpoint",a);break;case"thirdQuartile":AdvertEvents.registerVideoPixel(e,"ThirdQuartile",a);break;case"complete":AdvertEvents.registerVideoPixel(e,"Complete",a);break;case"pause":AdvertEvents.registerVideoPixel(e,"Pause",a);break;case"resume":AdvertEvents.registerVideoPixel(e,"Resume",a);break;case"replay":AdvertEvents.registerVideoPixel(e,"Replay",a);break;case"mute":AdvertEvents.registerVideoPixel(e,"Mute",a);break;case"unmute":AdvertEvents.registerVideoPixel(e,"Unmute",a);break;case"fullscreen":AdvertEvents.registerVideoPixel(e,"Fullscreen",a);break}}if(b&&b.length>=1){var k=b[0].childNodes;for(var j=0;j<k.length;j++){if(k[j].nodeName=="VideoClicks"){window.AdvertVideoClickUrl=AdvertVastVpaid.getCDATASection(k[j].getElementsByTagName("ClickThrough")[0]);f=k[j].getElementsByTagName("ClickTracking");for(var g=0;g<f.length;g++){var d=f[g];var a=AdvertVastVpaid.getCDATASection(d);AdvertEvents.registerVideoPixel(e,"Click",a)}}}}},setupVastVideoCallbacks:function(b,a){if(a&&a.onEnded&&typeof a.onEnded==="function"&&!a.onEndedCalled){b.addEventListener("ended",function(){a.onEndedCalled=true;setTimeout(function(){a.onEnded()},500)},false)}if(a&&a.onLoad&&typeof a.onLoad==="function"&&!a.onLoadCalled){a.onLoad();a.onLoadCalled=true}},playVastVideo:function(e,c,a,b){var f=document.getElementById(e);f.src=c;AdvertEvents.registerVideoTag(e);AdvertVastVpaid.registerVastVideoPixels(e,a);AdvertVastVpaid.setupVastVideoCallbacks(f,b);if(b&&b.handleClicks&&b.handleClicks===true){f.addEventListener("click",function(){AdvertEvents.recordFiredEvent(null,"Video Click","exit",window.AdvertVideoClickUrl);AdvertEvents.triggerVideoPixel(e,"Click")})}if(b&&b.controls&&b.controls===true){AdvertEvents.registerVideoControls(f)}var d=f.play();if(d!==undefined){d.then(function(){if(AdvertEvents.debug){console.log("Video Auto Playing")}},function(g){AdvertEvents.registerVideoControls(f);f.muted=true;f.play();if(AdvertEvents.debug){console.log("Video Blocked - Rendering Controls")}})}},getCDATASection:function(d){var c="";if(d!=null){var a=d.childNodes;if(a&&a.length>0){if(a.length==1){c=d.firstChild.nodeValue}else{for(var b=0;b<a.length;b++){c=c+a[b].nodeValue}}}}if(c.length>0){c=c.trim()}return c},getVastAdParameters:function(a){var e=null;var b=a.getElementsByTagName("Linear");if(b&&b.length>=1){var d=b[0].childNodes;for(var f=0;f<d.length;f++){if(d[f].nodeName=="AdParameters"){e=d[f]}}}return AdvertVastVpaid.getCDATASection(e)},playVastVPAID:function(d,a,i,k){AdvertEvents.registerVideoTag(d);AdvertVastVpaid.registerVastVideoPixels(d,i);var b=document.getElementById(d);AdvertVastVpaid.setupVastVideoCallbacks(b,k);var h=b.parentElement;var c=AdvertVastVpaid.getVastAdParameters(i);var g=document.createElement("script");g.type="text/javascript";g.async=true;g.src=a;g.addEventListener("load",function(){var m=j.contentWindow.getVPAIDAd();var l=1;m.subscribe(function(){m.startAd()},"AdLoaded");m.subscribe(function(){if(k&&k.onLoad&&typeof k.onLoad==="function"&&!k.onLoadCalled){k.onLoad();k.onLoadCalled=true}l=m.getAdVolume()},"AdStarted");m.subscribe(function(){if(!AdvertEvents.isEventFiredAlready(null,d+": Start")){AdvertEvents.recordFiredEvent(null,d+": Start","video");AdvertEvents.removeFiredEvent(d+": First Quartile");AdvertEvents.removeFiredEvent(d+": Midpoint");AdvertEvents.removeFiredEvent(d+": Third Quartile");AdvertEvents.triggerVideoPixel(d,"Start");AdvertEvents.sendVPAIDEvent("AdVideoStart")}else{if(!AdvertEvents.isEventFiredAlready(null,d+": Replay")&&AdvertEvents.isEventFiredAlready(null,d+": Complete")){AdvertEvents.recordFiredEvent(null,d+": Replay","video");AdvertEvents.removeFiredEvent(d+": Complete");AdvertEvents.triggerVideoPixel(d,"Replay")}}},"AdVideoStart");m.subscribe(function(){if(!AdvertEvents.isEventFiredAlready(null,d+": First Quartile")){AdvertEvents.recordFiredEvent(null,d+": First Quartile","video");AdvertEvents.triggerVideoPixel(d,"FirstQuartile");AdvertEvents.sendVPAIDEvent("AdVideoFirstQuartile")}},"AdVideoFirstQuartile");m.subscribe(function(){if(!AdvertEvents.isEventFiredAlready(null,d+": Midpoint")){AdvertEvents.recordFiredEvent(null,d+": Midpoint","video");AdvertEvents.triggerVideoPixel(d,"Midpoint");AdvertEvents.sendVPAIDEvent("AdVideoMidpoint")}},"AdVideoMidpoint");m.subscribe(function(){if(!AdvertEvents.isEventFiredAlready(null,d+": Third Quartile")){AdvertEvents.recordFiredEvent(null,d+": Third Quartile","video");AdvertEvents.triggerVideoPixel(d,"ThirdQuartile");AdvertEvents.sendVPAIDEvent("AdVideoThirdQuartile")}},"AdVideoThirdQuartile");m.subscribe(function(){if(!AdvertEvents.isEventFiredAlready(null,d+": Complete")){AdvertEvents.recordFiredEvent(null,d+": Complete","video");AdvertEvents.removeFiredEvent(d+": Start");AdvertEvents.removeFiredEvent(d+": Replay");AdvertEvents.triggerVideoPixel(d,"Complete");AdvertEvents.sendVPAIDEvent("AdVideoComplete")}if(k&&k.onEnded&&typeof k.onEnded==="function"&&!k.onEndedCalled){k.onEndedCalled=true;setTimeout(function(){k.onEnded()},500)}},"AdVideoComplete");m.subscribe(function(){if(!AdvertEvents.isEventFiredAlready(null,d+": Pause")){if(b.currentTime>1&&b.currentTime!=b.duration&&!b.seeking){AdvertEvents.recordFiredEvent(null,d+": Pause","video");AdvertEvents.removeFiredEvent(d+": Resume");AdvertEvents.triggerVideoPixel(d,"Pause");AdvertEvents.sendVPAIDEvent("AdPaused")}}},"AdPaused");m.subscribe(function(){if(!AdvertEvents.isEventFiredAlready(null,d+": Resume")){AdvertEvents.recordFiredEvent(null,d+": Resume","video");AdvertEvents.removeFiredEvent(d+": Pause");AdvertEvents.triggerVideoPixel(d,"Resume");AdvertEvents.sendVPAIDEvent("AdPlaying")}},"AdPlaying");m.subscribe(function(){if(m.getAdVolume()==0&&l>0){if(!AdvertEvents.isEventFiredAlready(null,d+": Mute")){AdvertEvents.recordFiredEvent(null,d+": Mute","video");AdvertEvents.removeFiredEvent(d+": Unmute");AdvertEvents.triggerVideoPixel(d,"Mute")}}if(m.getAdVolume()>0&&l==0){if(!AdvertEvents.isEventFiredAlready(null,d+": Unmute")){AdvertEvents.recordFiredEvent(null,d+": Unmute","video");AdvertEvents.removeFiredEvent(d+": Mute");AdvertEvents.triggerVideoPixel(d,"Unmute")}}l=m.getAdVolume()},"AdVolumeChange");m.subscribe(function(){h.removeChild(j);if(k&&k.onUnload&&typeof k.onUnload==="function"&&!k.onUnloadCalled){k.onUnload();k.onUnloadCalled=true}},"AdStopped");m.subscribe(function(){AdvertVastVpaid.onVastError("VPAID AdError")},"AdError");if(k&&k.handleClicks&&k.handleClicks===true){m.subscribe(function(n){if(typeof n==="string"&&n.indexOf("http")==0){AdvertEvents.recordFiredEvent(null,"Video Click","exit",n)}else{if(n.data&&n.data.playerHandles&&n.data.playerHandles===true&&n.data.url&&n.data.url.length>0){AdvertEvents.recordFiredEvent(null,"Video Click","exit",n.data.url)}else{if(window.AdvertVideoClickUrl){AdvertEvents.recordFiredEvent(null,"Video Click","exit",window.AdvertVideoClickUrl)}else{AdvertEvents.recordFiredEvent(null,"Video Click","exit")}}}AdvertEvents.triggerVideoPixel(d,"Click");AdvertEvents.sendVPAIDEvent("AdClickThru");if(AdvertEvents.debug){console.log("Triggered VPAID exit event")}},"AdClickThru")}m.initAd(window.innerWidth,window.innerHeight,"normal",700,{AdParameters:c},{slot:e,videoSlot:b})});var j=document.createElement("iframe");j.setAttribute("id","vpaid");j.setAttribute("allow","autoplay");j.setAttribute("allowtransparency","true");j.setAttribute("scrolling","no");j.setAttribute("style","position: absolute; margin:0; padding:0; width:100%; height:100%; border:0; overflow:hidden");if(k&&k.handleClicks&&k.handleClicks===true){j.style.zIndex=1}if(k&&k.zIndex&&!isNaN(k.zIndex)){j.style.zIndex=k.zIndex}h.insertBefore(j,b);var f=(j.contentWindow)?j.contentWindow.document:(j.contentDocument||j.document);f.open();f.write('<body style="margin:0; padding:0; background-color: transparent"></body>');f.close();var e=document.createElement("div");e.setAttribute("style","position: fixed; top: 0; left: 0; width: 100%; height: 100%");if(k&&k.handleClicks&&k.handleClicks===true){f.body.style.cursor="pointer"}if(k&&k.controls&&k.controls===true){AdvertEvents.registerVideoControls(b)}f.body.appendChild(e);e.appendChild(g)},playFlashVPAID:function(d,a,h,j){AdvertEvents.registerVideoTag(d);AdvertVastVpaid.registerVastVideoPixels(d,h);var b=document.getElementById(d);var g=b.parentElement;var c=AdvertVastVpaid.getVastAdParameters(h);var f=document.createElement("div");f.id="vpaid";f.setAttribute("style","position: fixed; top: 0; left: 0; width: 100%; height: 100%");g.insertBefore(f,b);var e=function(l,k){if(l){AdvertVastVpaid.onVastError("Loading VPAIDFLASHClient Failed: "+JSON.stringify(l),j)}else{i.loadAdUnit(a,function(n,m){if(n){AdvertVastVpaid.onVastError("Loading VPAIDAdUnit Failed: "+JSON.stringify(n),j)}else{var o=1;m.on("AdLoaded",function(q,p){m.startAd(function(s,r){})});m.on("AdStarted",function(q,p){if(j&&j.onLoad&&typeof j.onLoad==="function"&&!j.onLoadCalled){j.onLoad();j.onLoadCalled=true}o=m.getAdVolume()});m.on("AdVideoStart",function(q,p){if(!AdvertEvents.isEventFiredAlready(null,d+": Start")){AdvertEvents.recordFiredEvent(null,d+": Start","video");AdvertEvents.removeFiredEvent(d+": First Quartile");AdvertEvents.removeFiredEvent(d+": Midpoint");AdvertEvents.removeFiredEvent(d+": Third Quartile");AdvertEvents.triggerVideoPixel(d,"Start");AdvertEvents.sendVPAIDEvent("AdVideoStart")}else{if(!AdvertEvents.isEventFiredAlready(null,d+": Replay")&&AdvertEvents.isEventFiredAlready(null,d+": Complete")){AdvertEvents.recordFiredEvent(null,d+": Replay","video");AdvertEvents.removeFiredEvent(d+": Complete");AdvertEvents.triggerVideoPixel(d,"Replay")}}});m.on("AdVideoFirstQuartile",function(q,p){if(!AdvertEvents.isEventFiredAlready(null,d+": First Quartile")){AdvertEvents.recordFiredEvent(null,d+": First Quartile","video");AdvertEvents.triggerVideoPixel(d,"FirstQuartile");AdvertEvents.sendVPAIDEvent("AdVideoFirstQuartile")}});m.on("AdVideoMidpoint",function(q,p){if(!AdvertEvents.isEventFiredAlready(null,d+": Midpoint")){AdvertEvents.recordFiredEvent(null,d+": Midpoint","video");AdvertEvents.triggerVideoPixel(d,"Midpoint");AdvertEvents.sendVPAIDEvent("AdVideoMidpoint")}});m.on("AdVideoThirdQuartile",function(q,p){if(!AdvertEvents.isEventFiredAlready(null,d+": Third Quartile")){AdvertEvents.recordFiredEvent(null,d+": Third Quartile","video");AdvertEvents.triggerVideoPixel(d,"ThirdQuartile");AdvertEvents.sendVPAIDEvent("AdVideoThirdQuartile")}});m.on("AdVideoComplete",function(q,p){if(!AdvertEvents.isEventFiredAlready(null,d+": Complete")){AdvertEvents.recordFiredEvent(null,d+": Complete","video");AdvertEvents.removeFiredEvent(d+": Start");AdvertEvents.removeFiredEvent(d+": Replay");AdvertEvents.triggerVideoPixel(d,"Complete");AdvertEvents.sendVPAIDEvent("AdVideoComplete")}if(j&&j.onEnded&&typeof j.onEnded==="function"&&!j.onEndedCalled){j.onEndedCalled=true;setTimeout(function(){j.onEnded()},500)}});m.on("AdPaused",function(q,p){if(!AdvertEvents.isEventFiredAlready(null,d+": Pause")){AdvertEvents.recordFiredEvent(null,d+": Pause","video");AdvertEvents.removeFiredEvent(d+": Resume");AdvertEvents.triggerVideoPixel(d,"Pause");AdvertEvents.sendVPAIDEvent("AdPaused")}});m.on("AdPlaying",function(q,p){if(!AdvertEvents.isEventFiredAlready(null,d+": Resume")){AdvertEvents.recordFiredEvent(null,d+": Resume","video");AdvertEvents.removeFiredEvent(d+": Pause");AdvertEvents.triggerVideoPixel(d,"Resume");AdvertEvents.sendVPAIDEvent("AdPlaying")}});m.on("AdVolumeChange",function(q,p){if(m.getAdVolume()==0&&o>0){if(!AdvertEvents.isEventFiredAlready(null,d+": Mute")){AdvertEvents.recordFiredEvent(null,d+": Mute","video");AdvertEvents.removeFiredEvent(d+": Unmute");AdvertEvents.triggerVideoPixel(d,"Mute")}}if(m.getAdVolume()>0&&o==0){if(!AdvertEvents.isEventFiredAlready(null,d+": Unmute")){AdvertEvents.recordFiredEvent(null,d+": Unmute","video");AdvertEvents.removeFiredEvent(d+": Mute");AdvertEvents.triggerVideoPixel(d,"Unmute")}}o=m.getAdVolume()});m.on("AdStopped",function(q,p){g.removeChild(f);if(j&&j.onUnload&&typeof j.onUnload==="function"&&!j.onUnloadCalled){j.onUnload();j.onUnloadCalled=true}});m.on("AdError",function(q,p){AdvertVastVpaid.onVastError("VPAID AdError: "+JSON.stringify(q),j)});if(j&&j.handleClicks&&j.handleClicks===true){m.on("AdClickThru",function(q,p){if(typeof p==="string"&&p.indexOf("http")==0){AdvertEvents.recordFiredEvent(null,"Video Click","exit",p)}else{if(p.data&&p.data.playerHandles&&p.data.playerHandles===true&&p.data.url&&p.data.url.length>0){AdvertEvents.recordFiredEvent(null,"Video Click","exit",p.data.url)}else{if(window.AdvertVideoClickUrl){AdvertEvents.recordFiredEvent(null,"Video Click","exit",window.AdvertVideoClickUrl)}else{AdvertEvents.recordFiredEvent(null,"Video Click","exit")}}}AdvertEvents.triggerVideoPixel(d,"Click");AdvertEvents.sendVPAIDEvent("AdClickThru");if(AdvertEvents.debug){console.log("Triggered VPAID exit event")}})}m.handshakeVersion("2.0",function(q,p){m.initAd(window.innerWidth,window.innerHeight,"normal",700,{AdParameters:c},{slot:f,videoSlot:b},function(r){if(r){AdvertVastVpaid.onVastError("VPAID Init Error: "+JSON.stringify(r),j)}})})}})}};var i=new VPAIDFLASHClient(f,e,{data:j.flashSWF,width:window.innerWidth,height:window.innerHeight},{wmode:"transparent",salign:"tl",align:"left",allowScriptAccess:"always",scale:"noScale",allowFullScreen:"true",quality:"high"},{debug:false,timeout:10000})},loadVastXmlFeed:function(d,c,b){var a=new XMLHttpRequest();if(!("withCredentials" in a)){a=new XDomainRequest()}a.withCredentials=true;a.onreadystatechange=function(){if(a.readyState==4){if(a.status==200){AdvertVastVpaid.onVastXmlFeedLoaded(d,a.responseXML,b)}else{AdvertVastVpaid.onVastError("VAST Error: Failed to load XML feed",b)}}};a.open("GET",AdvertEvents.replaceMacroTokens(c),true);a.send("")},onVastError:function(b,a){if(a&&a.onError&&typeof a.onError==="function"){a.onError(b)}},getIdealMP4Size:function(j){var e=(window.innerWidth*window.innerHeight);var b=Number.MAX_VALUE;var a=null;var c=null;for(var d=0;d<j.length;d++){var h=j[d];var f=h.getAttribute("delivery");var i=h.getAttribute("type");if(f=="progressive"&&i=="video/mp4"){if(a==null){a=h}var g=(h.getAttribute("width")*h.getAttribute("height"));if(g<=e&&(e-g)<b){c=h;b=(e-g)}}}return(c!=null)?c:a},onVastXmlFeedLoaded:function(s,j,h){var x=j.documentElement;var e=x.getElementsByTagName("InLine");var t=x.getElementsByTagName("Wrapper");var g=function(B){var E=-1;var y=navigator.userAgent.toLowerCase();if(navigator.plugins!=null&&navigator.plugins.length>0&&navigator.plugins["Shockwave Flash"]){var D=navigator.plugins["Shockwave Flash"].description;var c=D.split(" ");var A=c[2].split(".");E=A[0]}else{if(y.indexOf("msie")!=-1&&y.indexOf("win")!=-1&&y.indexOf("opera")==-1){for(var z=18;z>=3;z--){if(E==-1){try{var C=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+z);E=z}catch(m){}}}}}return(E>=B)?true:false};if(e&&e.length>=1){var f=e[0].getElementsByTagName("Creative");var n=false;if(f&&f.length>=1){for(var v=0;(v<f.length&&!n);v++){var p=f[v];var a=p.getElementsByTagName("Linear");if(a&&a.length>=1){var r=[];var l=a[0].childNodes;for(var w=0;w<l.length;w++){if(l[w].nodeName=="MediaFiles"){r=l[w].getElementsByTagName("MediaFile")}}for(var q=0;(!n&&q<r.length);q++){var u=r[q];var b=u.getAttribute("type");if(b=="application/javascript"){AdvertVastVpaid.playVastVPAID(s,AdvertVastVpaid.getCDATASection(u),p,h);AdvertVastVpaid.fireVastImpressionPixels(e[0]);n=true;break}}for(var q=0;(!n&&q<r.length);q++){var u=r[q];var b=u.getAttribute("type");if(b=="application/x-shockwave-flash"&&g(9)){AdvertVastVpaid.playFlashVPAID(s,AdvertVastVpaid.getCDATASection(u),p,h);AdvertVastVpaid.fireVastImpressionPixels(e[0]);n=true;break}}for(var q=0;(!n&&q<r.length);q++){var u=r[q];var b=u.getAttribute("type");var k=u.getAttribute("delivery");if(b=="video/mp4"&&k=="progressive"){var d=AdvertVastVpaid.getIdealMP4Size(r);AdvertVastVpaid.playVastVideo(s,AdvertVastVpaid.getCDATASection(d),p,h);AdvertVastVpaid.fireVastImpressionPixels(e[0]);n=true;break}}}}}if(!n){AdvertVastVpaid.onVastError("VAST response did not contain any MediaFile tags with video/mp4 type",h)}}else{if(t&&t.length>=1){var o=t[0].getElementsByTagName("VASTAdTagURI");if(o&&o.length>=1){AdvertVastVpaid.loadVastXmlFeed(s,AdvertVastVpaid.getCDATASection(o[0]),h);AdvertVastVpaid.registerVastVideoPixels(s,t[0]);AdvertVastVpaid.fireVastImpressionPixels(t[0])}else{AdvertVastVpaid.onVastError("VAST response did not contain any VASTAdTagURI tags",h)}}else{AdvertVastVpaid.onVastError("VAST response did not contain any InLine or Wrapper tags",h)}}}};window.addEventListener("load",function(){var a=false;try{var b=Object.defineProperty({},"passive",{get:function(){a=true}});window.addEventListener("test",null,b)}catch(c){}document.body.addEventListener("click",AdvertEvents.handleOnClick);document.body.addEventListener("mousemove",AdvertEvents.handleMouseActivity);document.body.addEventListener("touchmove",AdvertEvents.handleMouseActivity,a?{passive:true}:false);document.body.addEventListener("mouseenter",AdvertEvents.startInteractiveTimeTracking);document.body.addEventListener("mouseleave",AdvertEvents.finishInteractiveTimeTracking)});